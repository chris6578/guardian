<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Reference | Guardian</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="Just playing around">
    <link rel="preload" href="/guardian/assets/css/0.styles.a924a422.css" as="style"><link rel="preload" href="/guardian/assets/js/app.e2a39a7d.js" as="script"><link rel="preload" href="/guardian/assets/js/2.4e20cf5d.js" as="script"><link rel="preload" href="/guardian/assets/js/9.a1720818.js" as="script"><link rel="prefetch" href="/guardian/assets/js/10.14cc6107.js"><link rel="prefetch" href="/guardian/assets/js/3.50bb1bb7.js"><link rel="prefetch" href="/guardian/assets/js/4.ce76527a.js"><link rel="prefetch" href="/guardian/assets/js/5.8c0aec19.js"><link rel="prefetch" href="/guardian/assets/js/6.657358e4.js"><link rel="prefetch" href="/guardian/assets/js/7.9570b0ea.js"><link rel="prefetch" href="/guardian/assets/js/8.47b4c175.js">
    <link rel="stylesheet" href="/guardian/assets/css/0.styles.a924a422.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/guardian/" class="home-link router-link-active"><!----> <span class="site-name">Guardian</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guardian/configuration.html" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/guardian/reference.html" class="nav-link router-link-exact-active router-link-active">
  Reference
</a></div><div class="nav-item"><a href="/guardian/case-studies.html" class="nav-link">
  Case studies
</a></div><div class="nav-item"><a href="https://github.com/mathieu-bour/guardian" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guardian/configuration.html" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/guardian/reference.html" class="nav-link router-link-exact-active router-link-active">
  Reference
</a></div><div class="nav-item"><a href="/guardian/case-studies.html" class="nav-link">
  Case studies
</a></div><div class="nav-item"><a href="https://github.com/mathieu-bour/guardian" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="reference"><a href="#reference" class="header-anchor">#</a> Reference</h1> <p></p><div class="table-of-contents"><ul><li><a href="#json-web-tokens-jwt">JSON Web Tokens (JWT)</a></li><li><a href="#use-cases">Use cases</a><ul><li><a href="#user-authentication">User authentication</a></li></ul></li><li><a href="#key">Key</a></li><li><a href="#claims">Claims</a></li><li><a href="#authority">Authority</a></li></ul></div><p></p> <h2 id="json-web-tokens-jwt"><a href="#json-web-tokens-jwt" class="header-anchor">#</a> JSON Web Tokens (JWT)</h2> <p>JSON Web Tokens are described in the <a href="https://tools.ietf.org/html/rfc7519" target="_blank" rel="noopener noreferrer">RFC7519<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <blockquote><p>JSON Web Token (JWT) is a compact, URL-safe means of representing claims to be transferred between two parties.
The claims in a JWT are encoded as a JSON object that is used as the payload of a JSON Web Signature (JWS) structure or as the plaintext of a JSON Web Encryption (JWE) structure, enabling the claims to be digitally signed or integrity protected with a Message Authentication Code (MAC) and/or encrypted.</p></blockquote> <p>Guardian is dealing with <strong>signed JWT</strong> commonly called <strong>JWS</strong>.</p> <p>JWS are particularly suitable when we want to transfer unencrypted but cryptographically unalterable data.
For example, it can be a user id, that we want to authenticate.</p> <p>The JWS consists of three distinct parts.</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>Header</td> <td>Metadata about the JWS, such as the used algorithm.</td></tr> <tr><td>Payload</td> <td>The actual piece of information held by the token.</td></tr> <tr><td>Signature</td> <td>Unique string generated from a secret key that ensures the integrity of the payload.</td></tr></tbody></table> <h2 id="use-cases"><a href="#use-cases" class="header-anchor">#</a> Use cases</h2> <h3 id="user-authentication"><a href="#user-authentication" class="header-anchor">#</a> User authentication</h3> <p>Suppose you have an application where the users are identified by their ids.
The user table might look like this:</p> <table><thead><tr><th>id</th> <th>username</th> <th>password  (hashed)</th></tr></thead> <tbody><tr><td>1</td> <td>mathieu</td> <td>$tr0gha$h</td></tr> <tr><td>2</td> <td>valentin</td> <td>1lovâ‚¬k8s</td></tr> <tr><td>3</td> <td>dimitri</td> <td>1mor$ay$</td></tr></tbody></table> <p>If you want to use the JWT, you will probably want to put the user id into the token payload, which allows you to simple check to token integrity and get the user id.</p> <p>JWT payloads are key-value piece of data called <strong>claims</strong>.
The standard claims are describe in the <a href="https://tools.ietf.org/html/rfc7519#section-4.1" target="_blank" rel="noopener noreferrer">RFC7519, Section 4.1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>In this example, we will put the user id inside the <code>sub</code> claim, as recommended by the <a href="https://tools.ietf.org/html/rfc7519#section-4.1.2" target="_blank" rel="noopener noreferrer">RFC7519, Section 4.1.2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <blockquote><h4 id="_4-1-2-sub-subject-claim"><a href="#_4-1-2-sub-subject-claim" class="header-anchor">#</a> 4.1.2.  &quot;sub&quot; (Subject) Claim</h4> <p>The &quot;sub&quot; (subject) claim identifies the principal that is the subject of the JWT.</p></blockquote> <p>This an example of an unserialized JWT:</p> <h4 id="header"><a href="#header" class="header-anchor">#</a> Header</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;alg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HS256&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;typ&quot;</span><span class="token operator">:</span> <span class="token string">&quot;JWT&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="payload"><a href="#payload" class="header-anchor">#</a> Payload</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;sub&quot;: &quot;1&quot;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="signature-using-the-key-guardian"><a href="#signature-using-the-key-guardian" class="header-anchor">#</a> Signature, using the key <code>guardian</code></h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>f9GAvQZnFohqZk2JOTRFEeGizsKNcPzKB8om521EHZ8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The signature, using the application JWT key, ensures that the <code>sub</code> claim cannot be modified by an attacker.
The token can now be serialized using the following algorithm:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>base64url(header) || &quot;.&quot; || base64url(payload) || &quot;.&quot; || signature
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>where <code>header</code> and <code>payload</code> are the JSON representations string of the header and the payload, and <code>||</code> the concatenation operator.</p> <p>Serializing the previous token gives the following result:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxIn0.f9GAvQZnFohqZk2JOTRFEeGizsKNcPzKB8om521EHZ8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>You can check the validity of this token on the <a href="https://jwt.io" target="_blank" rel="noopener noreferrer">jwt.io's debugger<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h1 id="guardian-concepts"><a href="#guardian-concepts" class="header-anchor">#</a> Guardian concepts</h1> <p>While Guardian is a library to handle JWT, we introduced some concepts to manipulate tokens more easily.</p> <h2 id="key"><a href="#key" class="header-anchor">#</a> Key</h2> <p>A <strong>key</strong> is composed of an algorithm and its parameters.
For example, a key which uses the <code>RS256</code> algorithm is RSA-based key and has a <em>size</em> expressed on bits.</p> <p>The following table summarizes the key types, their available algorithms and parameters.</p> <table><thead><tr><th>Type</th> <th>Available algorithms</th> <th>Parameters</th></tr></thead> <tbody><tr><td>ECDSA (Elliptic curves)</td> <td><code>HS256</code>, <code>HS384</code>, <code>HS512</code></td> <td><code>curve</code></td></tr> <tr><td>EDDSA (Edward's curves)</td> <td><code>EDDSA</code></td> <td><code>curve</code></td></tr> <tr><td>HMAC</td> <td><code>HS256</code>, <code>HS384</code>, <code>HS512</code></td> <td><code>size</code> in bits</td></tr> <tr><td>RSA</td> <td><code>RS256</code>, <code>RS384</code>, <code>RS512</code></td> <td><code>size</code> in bits</td></tr></tbody></table> <h2 id="claims"><a href="#claims" class="header-anchor">#</a> Claims</h2> <h2 id="authority"><a href="#authority" class="header-anchor">#</a> Authority</h2></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/guardian/assets/js/app.e2a39a7d.js" defer></script><script src="/guardian/assets/js/2.4e20cf5d.js" defer></script><script src="/guardian/assets/js/9.a1720818.js" defer></script>
  </body>
</html>
