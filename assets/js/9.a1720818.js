(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{329:function(e,t,a){"use strict";a.r(t);var s=a(33),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[e._v("#")]),e._v(" Reference")]),e._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#json-web-tokens-jwt"}},[e._v("JSON Web Tokens (JWT)")])]),a("li",[a("a",{attrs:{href:"#use-cases"}},[e._v("Use cases")]),a("ul",[a("li",[a("a",{attrs:{href:"#user-authentication"}},[e._v("User authentication")])])])]),a("li",[a("a",{attrs:{href:"#key"}},[e._v("Key")])]),a("li",[a("a",{attrs:{href:"#claims"}},[e._v("Claims")])]),a("li",[a("a",{attrs:{href:"#authority"}},[e._v("Authority")])])])]),a("p"),e._v(" "),a("h2",{attrs:{id:"json-web-tokens-jwt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#json-web-tokens-jwt"}},[e._v("#")]),e._v(" JSON Web Tokens (JWT)")]),e._v(" "),a("p",[e._v("JSON Web Tokens are described in the "),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc7519",target:"_blank",rel:"noopener noreferrer"}},[e._v("RFC7519"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("blockquote",[a("p",[e._v("JSON Web Token (JWT) is a compact, URL-safe means of representing claims to be transferred between two parties.\nThe claims in a JWT are encoded as a JSON object that is used as the payload of a JSON Web Signature (JWS) structure or as the plaintext of a JSON Web Encryption (JWE) structure, enabling the claims to be digitally signed or integrity protected with a Message Authentication Code (MAC) and/or encrypted.")])]),e._v(" "),a("p",[e._v("Guardian is dealing with "),a("strong",[e._v("signed JWT")]),e._v(" commonly called "),a("strong",[e._v("JWS")]),e._v(".")]),e._v(" "),a("p",[e._v("JWS are particularly suitable when we want to transfer unencrypted but cryptographically unalterable data.\nFor example, it can be a user id, that we want to authenticate.")]),e._v(" "),a("p",[e._v("The JWS consists of three distinct parts.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Name")]),e._v(" "),a("th",[e._v("Description")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Header")]),e._v(" "),a("td",[e._v("Metadata about the JWS, such as the used algorithm.")])]),e._v(" "),a("tr",[a("td",[e._v("Payload")]),e._v(" "),a("td",[e._v("The actual piece of information held by the token.")])]),e._v(" "),a("tr",[a("td",[e._v("Signature")]),e._v(" "),a("td",[e._v("Unique string generated from a secret key that ensures the integrity of the payload.")])])])]),e._v(" "),a("h2",{attrs:{id:"use-cases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-cases"}},[e._v("#")]),e._v(" Use cases")]),e._v(" "),a("h3",{attrs:{id:"user-authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user-authentication"}},[e._v("#")]),e._v(" User authentication")]),e._v(" "),a("p",[e._v("Suppose you have an application where the users are identified by their ids.\nThe user table might look like this:")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("id")]),e._v(" "),a("th",[e._v("username")]),e._v(" "),a("th",[e._v("password  (hashed)")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("1")]),e._v(" "),a("td",[e._v("mathieu")]),e._v(" "),a("td",[e._v("$tr0gha$h")])]),e._v(" "),a("tr",[a("td",[e._v("2")]),e._v(" "),a("td",[e._v("valentin")]),e._v(" "),a("td",[e._v("1lovâ‚¬k8s")])]),e._v(" "),a("tr",[a("td",[e._v("3")]),e._v(" "),a("td",[e._v("dimitri")]),e._v(" "),a("td",[e._v("1mor$ay$")])])])]),e._v(" "),a("p",[e._v("If you want to use the JWT, you will probably want to put the user id into the token payload, which allows you to simple check to token integrity and get the user id.")]),e._v(" "),a("p",[e._v("JWT payloads are key-value piece of data called "),a("strong",[e._v("claims")]),e._v(".\nThe standard claims are describe in the "),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc7519#section-4.1",target:"_blank",rel:"noopener noreferrer"}},[e._v("RFC7519, Section 4.1"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("In this example, we will put the user id inside the "),a("code",[e._v("sub")]),e._v(" claim, as recommended by the "),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc7519#section-4.1.2",target:"_blank",rel:"noopener noreferrer"}},[e._v("RFC7519, Section 4.1.2"),a("OutboundLink")],1),e._v(":")]),e._v(" "),a("blockquote",[a("h4",{attrs:{id:"_4-1-2-sub-subject-claim"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-sub-subject-claim"}},[e._v("#")]),e._v(' 4.1.2.  "sub" (Subject) Claim')]),e._v(" "),a("p",[e._v('The "sub" (subject) claim identifies the principal that is the subject of the JWT.')])]),e._v(" "),a("p",[e._v("This an example of an unserialized JWT:")]),e._v(" "),a("h4",{attrs:{id:"header"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#header"}},[e._v("#")]),e._v(" Header")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"alg"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"HS256"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"typ"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"JWT"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h4",{attrs:{id:"payload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#payload"}},[e._v("#")]),e._v(" Payload")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n  "sub": "1"\n}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h4",{attrs:{id:"signature-using-the-key-guardian"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signature-using-the-key-guardian"}},[e._v("#")]),e._v(" Signature, using the key "),a("code",[e._v("guardian")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("f9GAvQZnFohqZk2JOTRFEeGizsKNcPzKB8om521EHZ8\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("The signature, using the application JWT key, ensures that the "),a("code",[e._v("sub")]),e._v(" claim cannot be modified by an attacker.\nThe token can now be serialized using the following algorithm:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('base64url(header) || "." || base64url(payload) || "." || signature\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("where "),a("code",[e._v("header")]),e._v(" and "),a("code",[e._v("payload")]),e._v(" are the JSON representations string of the header and the payload, and "),a("code",[e._v("||")]),e._v(" the concatenation operator.")]),e._v(" "),a("p",[e._v("Serializing the previous token gives the following result:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxIn0.f9GAvQZnFohqZk2JOTRFEeGizsKNcPzKB8om521EHZ8\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("You can check the validity of this token on the "),a("a",{attrs:{href:"https://jwt.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("jwt.io's debugger"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h1",{attrs:{id:"guardian-concepts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#guardian-concepts"}},[e._v("#")]),e._v(" Guardian concepts")]),e._v(" "),a("p",[e._v("While Guardian is a library to handle JWT, we introduced some concepts to manipulate tokens more easily.")]),e._v(" "),a("h2",{attrs:{id:"key"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key"}},[e._v("#")]),e._v(" Key")]),e._v(" "),a("p",[e._v("A "),a("strong",[e._v("key")]),e._v(" is composed of an algorithm and its parameters.\nFor example, a key which uses the "),a("code",[e._v("RS256")]),e._v(" algorithm is RSA-based key and has a "),a("em",[e._v("size")]),e._v(" expressed on bits.")]),e._v(" "),a("p",[e._v("The following table summarizes the key types, their available algorithms and parameters.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Type")]),e._v(" "),a("th",[e._v("Available algorithms")]),e._v(" "),a("th",[e._v("Parameters")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("ECDSA (Elliptic curves)")]),e._v(" "),a("td",[a("code",[e._v("HS256")]),e._v(", "),a("code",[e._v("HS384")]),e._v(", "),a("code",[e._v("HS512")])]),e._v(" "),a("td",[a("code",[e._v("curve")])])]),e._v(" "),a("tr",[a("td",[e._v("EDDSA (Edward's curves)")]),e._v(" "),a("td",[a("code",[e._v("EDDSA")])]),e._v(" "),a("td",[a("code",[e._v("curve")])])]),e._v(" "),a("tr",[a("td",[e._v("HMAC")]),e._v(" "),a("td",[a("code",[e._v("HS256")]),e._v(", "),a("code",[e._v("HS384")]),e._v(", "),a("code",[e._v("HS512")])]),e._v(" "),a("td",[a("code",[e._v("size")]),e._v(" in bits")])]),e._v(" "),a("tr",[a("td",[e._v("RSA")]),e._v(" "),a("td",[a("code",[e._v("RS256")]),e._v(", "),a("code",[e._v("RS384")]),e._v(", "),a("code",[e._v("RS512")])]),e._v(" "),a("td",[a("code",[e._v("size")]),e._v(" in bits")])])])]),e._v(" "),a("h2",{attrs:{id:"claims"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#claims"}},[e._v("#")]),e._v(" Claims")]),e._v(" "),a("h2",{attrs:{id:"authority"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#authority"}},[e._v("#")]),e._v(" Authority")])])}),[],!1,null,null,null);t.default=r.exports}}]);